<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <!-- Load fonts asynchronously so they never block rendering or JS execution -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Spline+Sans+Mono:wght@400;500;600&family=Syne:wght@400;500;600;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
  <style>
    /* ── Reset & base ───────────────────────────────────────────── */
    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --primary-50:  #E8F0F7;
      --primary-100: #D1E0EE;
      --primary-200: #A3C1DD;
      --primary-300: #75A2CC;
      --primary-400: #4783BB;
      --primary-500: #4074A8;
      --primary-600: #336086;
      --primary-700: #264864;
      --primary-800: #1A3042;
      --primary-900: #0D1821;

      --accent-50:  #FEF9E7;
      --accent-100: #FDF3CF;
      --accent-200: #FBE79F;
      --accent-300: #F9DB6F;
      --accent-400: #F7CF3F;
      --accent-500: #F2A918;
      --accent-600: #C28713;
      --accent-700: #91650E;
      --accent-800: #61430A;
      --accent-900: #302205;

      --gray-50:  #F9FAFB;
      --gray-100: #F3F4F6;
      --gray-200: #E5E7EB;
      --gray-300: #D1D5DB;
      --gray-400: #9CA3AF;
      --gray-500: #6B7280;
      --gray-600: #4B5563;
      --gray-700: #374151;
      --gray-800: #1F2937;
      --gray-900: #111827;
    }

    body {
      font-family: 'Spline Sans Mono', 'SF Mono', 'Fira Code', Consolas, monospace;
      font-size: 12px;
      color: var(--gray-800);
      background: var(--gray-100);
      display: flex;
      flex-direction: column;
      height: 100vh;
      overflow: hidden;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    /* ── Header / Controls ──────────────────────────────────────── */
    .header {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 16px;
      background: #ffffff;
      border-bottom: 1px solid var(--gray-200);
      flex-shrink: 0;
    }

    .logo-mark {
      display: flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
      flex-shrink: 0;
    }

    .logo-mark svg {
      height: 20px;
      width: auto;
      flex-shrink: 0;
    }

    .header .divider {
      width: 1px;
      height: 20px;
      background: var(--gray-200);
    }

    .selection-label {
      color: var(--gray-500);
      font-size: 11px;
      flex-shrink: 0;
    }

    .controls {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-left: auto;
    }

    .controls label {
      color: var(--gray-500);
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      font-weight: 500;
    }

    .controls select {
      background: #ffffff;
      color: var(--gray-700);
      border: 1px solid var(--gray-300);
      border-radius: 4px;
      padding: 4px 6px;
      font-family: inherit;
      font-size: 11px;
      cursor: pointer;
      transition: border-color 0.15s;
    }

    .controls select:focus {
      outline: none;
      border-color: var(--primary-500);
    }

    /* ── Buttons ─────────────────────────────────────────────────── */
    .btn-primary {
      background: var(--accent-500);
      color: var(--gray-900);
      border: none;
      border-radius: 5px;
      padding: 7px 14px;
      font-family: 'Syne', sans-serif;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.15s, transform 0.1s;
      white-space: nowrap;
    }

    .btn-primary:hover:not(:disabled) {
      background: var(--accent-400);
      transform: translateY(-1px);
    }

    .btn-primary:active:not(:disabled) {
      transform: translateY(0);
    }

    .btn-primary:disabled {
      opacity: 0.45;
      cursor: not-allowed;
    }

    .btn-small {
      background: #ffffff;
      color: var(--gray-700);
      border: 1px solid var(--gray-300);
      border-radius: 4px;
      padding: 4px 10px;
      font-family: inherit;
      font-size: 11px;
      cursor: pointer;
      transition: background 0.15s, border-color 0.15s;
    }

    .btn-small:hover {
      background: var(--gray-50);
      border-color: var(--gray-400);
    }

    /* ── Status line ─────────────────────────────────────────────── */
    .status-line {
      padding: 7px 16px;
      font-size: 10px;
      color: var(--gray-500);
      background: #ffffff;
      border-bottom: 1px solid var(--gray-200);
      flex-shrink: 0;
      letter-spacing: 0.02em;
    }

    /* ── Progress ─────────────────────────────────────────────────── */
    .progress-area {
      display: none;
      padding: 12px 16px;
      flex-shrink: 0;
    }

    .progress-track {
      width: 100%;
      height: 5px;
      background: var(--gray-200);
      border-radius: 3px;
      overflow: hidden;
    }

    .progress-bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, var(--primary-500), var(--primary-400));
      border-radius: 3px;
      transition: width 0.3s ease;
    }

    .progress-text {
      margin-top: 6px;
      font-size: 10px;
      color: var(--gray-500);
    }

    /* ── Results list ─────────────────────────────────────────────── */
    .results-list {
      flex: 1;
      overflow-y: auto;
      padding: 6px 16px;
    }

    .results-list::-webkit-scrollbar { width: 5px; }
    .results-list::-webkit-scrollbar-track { background: transparent; }
    .results-list::-webkit-scrollbar-thumb {
      background: var(--gray-300);
      border-radius: 3px;
    }

    .result-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 8px 10px;
      border-bottom: 1px solid var(--gray-200);
      transition: background 0.1s;
    }

    .result-row:hover {
      background: var(--primary-50);
    }

    .result-row:last-child { border-bottom: none; }

    .result-info {
      display: flex;
      flex-direction: column;
      gap: 2px;
      min-width: 0;
    }

    .result-name {
      font-size: 11px;
      color: var(--gray-800);
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      font-weight: 500;
    }

    .result-meta {
      font-size: 10px;
      color: var(--gray-500);
    }

    .result-meta strong {
      color: var(--primary-500);
      font-weight: 600;
    }

    /* ── Download bar ─────────────────────────────────────────────── */
    .download-bar {
      display: none;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      padding: 10px 16px;
      background: #ffffff;
      border-top: 1px solid var(--gray-200);
      flex-shrink: 0;
    }

    .download-summary {
      font-size: 10px;
      color: var(--gray-500);
    }

    .download-summary strong {
      color: var(--primary-500);
    }

    /* ── Empty state ──────────────────────────────────────────────── */
    .empty-state {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
      text-align: center;
      padding: 40px 20px;
    }

    .empty-state .empty-logo {
      opacity: 0.18;
      margin-bottom: 16px;
    }

    .empty-state .empty-logo svg {
      height: 36px;
      width: auto;
    }

    .empty-state p {
      font-size: 12px;
      line-height: 1.6;
      color: var(--gray-500);
      max-width: 320px;
    }

    .empty-state p strong {
      color: var(--accent-600);
      font-weight: 600;
    }
  </style>
</head>
<body>

  <!-- Header: logo, selection info, controls, export button -->
  <div class="header">
    <div class="logo-mark">
      <!-- INJECT_LOGO -->
    </div>
    <span class="divider"></span>
    <span class="selection-label" id="selection-label">No exportable frames selected</span>

    <div class="controls">
      <label for="format-select">Format</label>
      <select id="format-select">
        <option value="JPG" selected>JPG</option>
        <option value="PNG">PNG</option>
      </select>

      <label for="scale-select">Scale</label>
      <select id="scale-select">
        <option value="1">1×</option>
        <option value="2" selected>2×</option>
        <option value="3">3×</option>
        <option value="4">4×</option>
      </select>

      <button class="btn-primary" id="export-btn" disabled>Export &amp; Smoosh</button>
    </div>
  </div>

  <!-- Status line -->
  <div class="status-line" id="status-line">Select frames and click Export &amp; Smoosh</div>

  <!-- Progress -->
  <div class="progress-area" id="progress-area">
    <div class="progress-track">
      <div class="progress-bar" id="progress-bar"></div>
    </div>
    <div class="progress-text" id="progress-text">Compressing…</div>
  </div>

  <!-- Scrollable results -->
  <div class="results-list" id="results-list">
    <div class="empty-state">
      <!-- Large faded logo for empty state -->
      <div class="empty-logo">
        <!-- INJECT_LOGO_EMPTY -->
      </div>
      <p>Select frames in Figma, choose your format &amp; scale,<br/>then click <strong>Export &amp; Smoosh</strong> to compress.</p>
    </div>
  </div>

  <!-- Download bar -->
  <div class="download-bar" id="download-bar">
    <span class="download-summary" id="download-summary"></span>
    <button class="btn-primary" id="download-all-btn">Download All</button>
  </div>

  <!-- Codec scripts: emscripten factories + oxipng wasm-bindgen.
       These define window.__smoosh_mozjpeg_dec, __smoosh_mozjpeg_enc, __smoosh_oxipng
       as inert factory functions. They do NOT instantiate WASM until called. -->
  <!-- INJECT_CODECS -->

  <!-- Main UI bundle -->
  <!-- INJECT_JS -->

</body>
</html>
